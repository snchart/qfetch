#!/bin/sh
res="\033[0m"
c1="\033[1;31m" # red
c2="\033[1;172m" # orange
c3="\033[1;33m" # yellow
c4="\033[1;32m" # green
c5="\033[1;96m" # light blue
c6="\033[1;34m" # blue
c7="\033[1;35m" # purple
c8="\033[1;36m" # aqua
c9="\033[1;37m" # gray or white
version="beta"

if [ "$(uname -s)" = Linux ]; then
    user="$(id -un)"
    host="$(uname -n)"
    distro="$(cat /etc/os-release | grep PRETTY_NAME | awk -F '=' '{print $2}' | tr -d '"')"
    ram="$(free | awk 'NR==2 {print int($3 / 1024)"MiB" " / " int($2 / 1024)"MiB"}')"
    cpu="$(grep -m 1 'model name' /proc/cpuinfo | cut -d ':' -f2 | sed 's/^ //')"
    shell="$(echo $SHELL)"
elif [ "$(uname -s)" = FreeBSD ]; then
    user="$(id -un)"
    host="$(uname -n)"
    distro="FreeBSD"
    ram="$(echo wip)"
    cpu="$(sysctl -n hw.model 2>/dev/null)"
    shell="$(echo $SHELL)"
elif command -v getprop >/dev/null 2>&1; then
    if pgrep -x "/data/data/com.termux/files/usr/bin/bash" >/dev/null 2>&1; then
        termux="yes"
        distro="Android $(getprop ro.build.version.release)"
        ram="$(free | awk 'NR==2 {print int($3 / 1024)"MiB" " / " int($2 / 1024)"MiB"}')"
        cpu="$(echo wip)"
        shell="$(basename $SHELL)"
    else
        distro="Android $(getprop ro.build.version.release)"
        android="yes"
        ram="$(free | awk 'NR==2 {print int($3 / 1024)"MiB" " / " int($2 / 1024)"MiB"}')"
        cpu="$(echo wip)"
        shell="$(basename $SHELL)"
    fi
fi

case "$distro" in
        "EndeavourOS"*) ascii="endeavour"; color="$c7" ;;
        "Void Linux"*) ascii="void"; color="$c4" ;;
        "Ubuntu"*) ascii="ubuntu"; color="$c2" ;;
        "Debian"*) ascii="debian"; color="$c1" ;;
        "Arch Linux"*) ascii="arch"; color="$c5" ;;
        "Linux Mint"*) ascii="mint"; color="$c4" ;;
        "NixOS"*) ascii="nixos"; color="$c5" ;;
        "Alpine Linux"*) ascii="alpine"; color="$c5" ;;
        "Fedora Linux"*) ascii="fedora"; color="$c6" ;;
        "PostmarketOS"*) ascii="pmos"; color="$c4" ;;
        "CRUX"*) ascii="crux"; color="$c6" ;;
        "openSUSE"*) ascii="opensuse"; color="$c4" ;;
        "Locoware GNU/Linux"*) ascii="locoware"; color="$c3" ;;
        "Artix"*) ascii="artix"; color="$c5" ;;
        "Slackware"*) ascii="slackware"; color="$c6" ;;
        "Devuan GNU/Linux"*) ascii="devuan"; color="$3" ;;
        "FreeBSD"*) ascii="freebsd"; color="$c1" ;;
        "Gentoo"*) ascii="gentoo"; color="$c7" ;;
        *) ascii="crux" ;;
esac

pkgm(){
    if command -v pacman >/dev/null 2>&1; then
        echo "pacman [$(pacman -Qq | wc -l)]"
    elif command -v apt >/dev/null 2>&1; then
        if [ "$termux" = "yes" ]; then
            echo "pkg [$(dpkg --get-selections | grep -v deinstall | wc -l)]"
        else
            echo "apt [$(dpkg --get-selections | grep -v deinstall | wc -l)]"
        fi
    elif command -v dnf >/dev/null 2>&1; then
        echo "dnf [$(rmp -qa | wc -l)]"
    elif command -v zypper >/dev/null 2>&1; then
        echo "zypper [$(rpm -qa | wc -l)]"
    elif command -v apk >/dev/null 2>&1; then
        echo "apk [$(grep -c '^P:' /lib/apk/db/installed)]"
    elif command -v xbps-install >/dev/null 2>&1; then
        echo "xbps [$(xbps-query -l | wc -l)]"
    elif command -v pkg >/dev/null 2>&1; then
        if [ "$(uname -o)" = "FreeBSD" ]; then
            echo "pkg [$(pkg query -a '%n' | wc -l | tr -d ' ')]"
        elif [ "$(uname -s)" = "Darwin" ]; then
            echo "pkg [$(pkg list | wc -l | tr -d ' ')]"
        elif [ "$termux" = "yes" ]; then
            echo "pkg [$(dpkg --get-selections | grep -v deinstall | wc -l)]"
        fi
    elif command -v nix >/dev/null 2>&1; then
        echo "nix"
    elif command -v scoop >/dev/null 2>&1; then
        echo "scoop"
    elif command -v pkgtool >/dev/null 2>&1; then
        echo "pkgtool [$(ls /var/log/packages | wc -l)]"
    elif command -v yum >/dev/null 2>&1; then
        echo "yum [$(rpm -qa | wc -l)]"
    elif command -v emerge >/dev/null 2>&1; then
        echo "emerge [$(qlist -I | wc -l)]"
    elif command -v prt-get >/dev/null 2>&1; then
        echo "prt-get [$(pkginfo -i | wc -l)]"
    elif command -v scratch >/dev/null 2>&1; then
        echo "scratchpkg [$(scratch list-installed | wc -l)]"
    elif [ "$android" = "yes" ]; then
        echo "Google Play"
    else
        echo "unknown"
    fi
}

environmentingoment() {
    if [ -n "$XDG_CURRENT_DESKTOP" ]; then echo "$XDG_CURRENT_DESKTOP"
    elif [ -n "$DESKTOP_SESSION" ]; then echo "$DESKTOP_SESSION"
    elif pgrep -x xfce4-session >/dev/null 2>&1; then echo "xfce"
    elif pgrep -x gnome-session >/dev/null 2>&1; then echo "gnome"
    elif pgrep -x kdeinit5 >/dev/null 2>&1; then echo "kde"
    elif pgrep -x lxsession >/dev/null 2>&1; then echo "lxde"
    elif pgrep -x mate-session >/dev/null 2>&1; then echo "mate"
    elif pgrep -x sway >/dev/null 2>&1; then echo "sway"
    elif pgrep -x hyprland >/dev/null 2>&1; then echo "hyprland"
    elif pgrep -x dwm >/dev/null 2>&1; then echo "dwm"
    elif pgrep -x twm >/dev/null 2>&1; then echo "twm"
    elif pgrep -x i3 >/dev/null 2>&1; then echo "i3"
    elif pgrep -x bspwm >/dev/null 2>&1; then echo "bspwm"
    elif pgrep -x xmonad >/dev/null 2>&1; then echo "xmonad"
    elif [ "$android" = "yes" || "$termux" = "yes" ]; then echo "SurfaceFlinger"
    else echo "Unknown"
    fi
}

case "$ascii" in
    endeavour*)
        ascia="${res}                       "
        ascib="${c1}           /${c7}o${c6}.         "
        ascic="${c1}         /${c7}sssso${c6}-       "
        ascid="${c1}       /${c7}ossssssso${c6}:     "
        ascie="${c1}     /${c7}ssssssssssso${c6}+    "
        ascif="${c1}   /${c7}ssssssssssssssso${c6}+  "
        ascig="${c1} //${c7}osssssssssssssso${c6}+-  "
        ascih="${c6}  \`+++++++++++++++-\`   "
        ascij="                       "
        ;;
    mint*)
        ascia="                 "
        ascib="${c4}  ___________    "
        ascic="${c4} |_          \\   "
        ascid="${c4}   | |${res} _____${c4} |   "
        ascie="${c4}   |${res} | | | | ${c4}|   "
        ascif="${c4}   |${res} | | | | ${c4}|   "
        ascig=" ${c4}  |${res} \\_____/ ${res}|   "
        ascih="${c4}   \\_________/   "
        ascij="                 "
        ;;
    slackware*)
        ascia="               "
        ascib="${c6}    ________   "
        ascic="${c6}   /  ______|  "
        ascid="${c6}   | |______   "
        ascie="${c6}   \\______  \\  "
        ascif="${c6}    ______| |  "
        ascig="${c6} | |________/  "
        ascih="${c6} |____________ "
        ascij="               "
        ;;
    arch*)
        ascia="                 " 
        ascib="${c5}       /\\        "
        ascic="${c5}      /  \\       "
        ascid="${c5}     /    \\      "
        ascie="${c5}    /      \\     "
        ascif="${c5}   /   ,,   \\    "
        ascig="${c5}  /   |  |   \\   "
        ascih="${c5} /_-''    ''-_\\  "
        ascij="                 "
        ;;
    nixos*)
        ascia="                "
        ascib="${c5}   \\\\  \\\\ //    "
        ascic=" ${c5} ==\\\\__\\\\/ //  "
        ascid="${c5}    //   \\\\//   "
        ascie="${c5} ==//     //==  "
        ascif="${c5}  //\\\\___//     "
        ascig="${c5} // /\\\\  \\\\==   "
        ascih="${c5}   // \\\\  \\\\    " 
        ascij="                "
        ;;
    void*)
        ascia="                "
        ascib="${c4}    ________    "
        ascic="${c4}  _ \\______ \\   "
        ascid="${c4} | \\  ___  \\ |  "
        ascie="${c4} | | /   \\ | |  " 
        ascif="${c4} | | \\___/ | |  " 
        ascig="${c4} | \\______ \\_|  "
        ascih="${c4}  \\_______\\     "
        ascij="                "
        ;;
    ubuntu*)
        ascia="              "
        ascib="${c2}          _   "
        ascic="${c2}      ---(_)  "  
        ascid="${c2}  _/  ---  \  "
        ascie="${c2} (_) |   |    "
        ascif="${c2}   \  --- _/  "
        ascig="${c2}      ---(_)  "
        ascih="              "
        ascij="              "
        ;;
    debian*)
        ascia="          "
        ascib="          "
        ascic="${c1}   _____   "
        ascid="${c1}  /  __ \\  "
        ascie="${c1} |  /    | "
        ascif="${c1} |  \\___-  " 
        ascig="${c1} -_        "
        ascih="${c1}   --_     "
        ascij="          "
        ;;
    alpine*)
        ascia=""
        ascib="${c5}     /\ /\     "
        ascic="${c5}    // \  \    "
        ascid="${c5}   //   \  \   "
        ascie="${c5}  //     \  \  "
        ascif="${c5} //       \  \ "
        ascig="${c5}           \  \\"
        ascih="${c5}            \  "
        ascij="               "
        ;;
    fedora*)
        ascia="${c5}         ,'''''.  "
        ascib="${c5}        |   ,. |  "
        ascic="${c5}        |  |  ''  "
        ascid="${c5}   ,....|  |..    "
        ascie="${c5} .'  ,_;|   ..'   "
        ascif="${c5} |  |   |  |      "
        ascig="${c5} |  ',_,'  |      "
        ascih="${c5} '.       ,'      "
        ascij="${c5}   '''''''        "
        ;;
    pmos*)
        ascia="             "
        ascib="             "
        ascic="${c4}      /\      "
        ascid="${c4}     /  \     "
        ascie="${c4}     \_  \    "
        ascif="${c4}   /\_ \/ _   "
        ascig="${c4}  /  / __/ \  "
        ascih="${c4} /___\ \____\ "
        ascij="             "
        ;;
    crux*)
        ascia="            "
        ascib="${c5}     ___     "
        ascic="${c5}    (.Â· |    "
        ascid="${c5}    (<> |    "
        ascie="${c5}   / __  \   "
        ascif="${c5}  ( /  \ /|  "
        ascig="${c5} _/\ __)/_)  "
        ascih="${c5} \/-____\/   "
        ascij="            "
        ;;
    opensuse*)
        ascia="${c4}   .oooo.           "
        ascib="${c4}  o   o  o          "
        ascic="${c4}  ooooo  oo         "
        ascid="${c4}  o      oo         "
        ascie="${c4}   'oooooooooooo.   "
        ascif="${c4}         oo      o  "
        ascig="${c4}         oo  ooooo  "
        ascih="${c4}          o  o   o  "
        ascij="${c4}           'oooo'   "
        ;;
    locoware*)
        ascia="              "
        ascib="              "
        ascic="${c3}       dMP    "
        ascid="${c3}      dMP     "
        ascie="${c3}     dMP      "
        ascif="${c3}    dMP       "
        ascig="${c3}   dMMMMMMP   "
        ascih="              "
        ascij="              "
        ;;
    artix*)
        ascia="                "
        ascia="${c5}       /\       "
        ascib="${c5}      /  \      "
        ascic="${c5}     /\`'.,\     "
        ascid="${c5}    /     ',    "
        ascie="${c5}   /      ,\`\   "
        ascif="${c5}  /   ,.'\`.  \  "
        ascig="${c5} /.,'`     `'.\ "
        ascih="                "
        ascij="                "
        ;;
    devuan*)
        ascia="               "
        ascib="${c3}  ..:::.       "
        ascic="${c3}     ..-==-    "
        ascid="${c3}         .+#:  "
        ascie="${c3}          =@@  "
        ascif="${c3}       :+%@#:  "
        ascig="${c3} .:=+#@@%*:    "
        ascih="${c3} #@@@#=:       "
        ascij="               "
        ;;
    freebsd*)
        ascia="                "
        ascib="                "
        ascic="${c1} /\,-'''''-,/\  "
        ascid="${c1} \_)       (_/  "
        ascie="${c1} |           |  "
        ascif="${c1} |           |  "
        ascig="${c1}  ;         ;   "
        ascih="${c1}   '-_____-'    "
        ascij="                "
        ;;
    gentoo*)
        ascia="              "
        ascib="${c7}  _-----_     "
        ascic="${c7} (       \    "
        ascid="${c7} \    0   \   "
        ascie="${res}  \        )  "
        ascif="${res}  /      _/   "
        ascig="${res} (     _-     "
        ascih="${res} \____-       "
        ascij="              "
        ;;
esac

echo -e "$ascia" "$res" "${color}$user${res}@${color}$host${res}"
echo -e "$ascib" "$res" "${color}os:${res}    " "$distro"
echo -e "$ascic" "$res" "${color}pkg:${res}   " "$(pkgm)"
echo -e "$ascid" "$res" "${color}ram:${res}   " "$ram"
echo -e "$ascie" "$res" "${color}cpu:${res}   " "$cpu"
echo -e "$ascif" "$res" "${color}sh:${res}    " "$shell"
echo -e "$ascig" "$res" "${color}de/wm:${res} " "$(environmentingoment)"
echo -e "$ascih" "$res" "${color}ver:${res}   " "${version}" 
echo -e "$ascij" "" ""
